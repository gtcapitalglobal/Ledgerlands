{
  "query": "-- Add FK for payments.contractId\nALTER TABLE payments \nADD CONSTRAINT fk_payments_contract \nFOREIGN KEY (contractId) REFERENCES contracts(id) \nON DELETE CASCADE;\n\n-- Add FK for installments.contractId\nALTER TABLE installments \nADD CONSTRAINT fk_installments_contract \nFOREIGN KEY (contractId) REFERENCES contracts(id) \nON DELETE CASCADE;\n\n-- Add FK for installments.paymentId\nALTER TABLE installments \nADD CONSTRAINT fk_installments_payment \nFOREIGN KEY (paymentId) REFERENCES payments(id) \nON DELETE SET NULL;\n\n-- Add FK for contractAttachments.contractId\nALTER TABLE contractAttachments \nADD CONSTRAINT fk_attachments_contract \nFOREIGN KEY (contractId) REFERENCES contracts(id) \nON DELETE CASCADE;",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3krvCwj2bCKp68a.921b4e0a8333 --database TnDmUootRUrjFAU3xdbYec --execute -- Add FK for payments.contractId\nALTER TABLE payments \nADD CONSTRAINT fk_payments_contract \nFOREIGN KEY (contractId) REFERENCES contracts(id) \nON DELETE CASCADE;\n\n-- Add FK for installments.contractId\nALTER TABLE installments \nADD CONSTRAINT fk_installments_contract \nFOREIGN KEY (contractId) REFERENCES contracts(id) \nON DELETE CASCADE;\n\n-- Add FK for installments.paymentId\nALTER TABLE installments \nADD CONSTRAINT fk_installments_payment \nFOREIGN KEY (paymentId) REFERENCES payments(id) \nON DELETE SET NULL;\n\n-- Add FK for contractAttachments.contractId\nALTER TABLE contractAttachments \nADD CONSTRAINT fk_attachments_contract \nFOREIGN KEY (contractId) REFERENCES contracts(id) \nON DELETE CASCADE;",
  "returncode": 1,
  "logs": [
    "ERROR 1452 (23000) at line 2: Cannot add or update a child row: a foreign key constraint fails (`tndmuootrurjfau3xdbyec`.`payments`, CONSTRAINT `fk_payments_contract` FOREIGN KEY (`contractId`) REFERENCES `contracts` (`id`) ON DELETE CASCADE)"
  ]
}